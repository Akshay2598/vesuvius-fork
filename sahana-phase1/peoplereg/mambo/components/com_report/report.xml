<?xml version="1.0" ?>
<mosinstall type="component">
  <name>Report</name>
  <creationDate>2004-12-31</creationDate>
  <author>Anuradha Ratnaweera</author>
  <copyright>Released under GNU/GPL License</copyright>
  <authorEmail>anuradha@gnu.org</authorEmail>
  <authorUrl>www.sahana.lk</authorUrl>
  <version>0.1</version>
  <description>Component to enter victim data.</description>
  <files>
    <filename>report.php</filename>
    <filename>forms.php</filename>
    <filename>db.php</filename>
  </files>
  <install>
    <queries>
      <query>
        drop table if exists sahana_entities;
      </query>
      <query>
        create table sahana_entities (
        	id integer(10) not null auto_increment,
        	primary key (id)
        );
      </query>
      <query>
        drop table if exists sahana_reports;
      </query>
      <query>
        create table sahana_reports (
        	id integer(10) not null auto_increment,
        	user_id integer,
        	dtime datetime not null,
        	validity integer,
        	primary key (id)
        );
      </query>
      <query>
        drop table if exists sahana_attribute_values;
      </query>
      <query>
        create table sahana_attribute_values (
        	entity integer,
        	report_id integer,
        	attribute_id integer,
        	value_int integer,
        	value_string varchar(255)
        );
      </query>
      <query>
        drop table if exists sahana_attributes;
      </query>
      <query>
        create table sahana_attributes (
        	id integer not null auto_increment,
        	name varchar(31),
        	caption varchar(63),
        	data_type integer, -- 0, integer, 1 string
        	publicity integer,
        	search integer,
        	primary key (id)
        );
      </query>
      <query>
        drop table if exists sahana_attribute_options;
      </query>
      <query>
        create table sahana_attribute_options (
        	id integer not null auto_increment,
        	attribute_id integer,
        	name varchar(31),
        	caption varchar(63),
        	unique (attribute_id, name),
        	primary key (id)
        );
      </query>

      <query>
        drop table if exists sahana_search_terms;
      </query>
      <query>
        create table sahana_search_terms (
        	id integer not null auto_increment,
        	term varchar(63),
			unique (term),
        	primary key (id)
        );
      </query>

      <query>
        drop table if exists sahana_search_entities;
      </query>
      <query>
        create table sahana_search_entities (
        	term_id integer not null,
        	entity_id integer not null,
        	primary key (term_id, entity_id)
        );
      </query>

      <query>
        insert into sahana_attributes
            (name, caption, data_type, publicity, search) values
			('name', 'Full name', 1, 0, 1),
            ('other_names', 'Other names', 1, 0, 1),
            ('dob', 'Date of birth', 1, 2, 1),
            ('age', 'Age', 0, 0, 1),
            ('age_str', 'Age (string)', 1, 0, 1);
      </query>

      <query>
        insert into sahana_attributes
		    (name, caption, data_type, publicity, search)
	        values ('gender', 'Gender', 0, 0, 1);
      </query>
      <query>
        insert into sahana_attribute_options
		    (attribute_id, name, caption) values
			(last_insert_id(), 'unknown', 'Unknown'),
			(last_insert_id(), 'male', 'Male'),
			(last_insert_id(), 'female', 'Female');
      </query>

      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search)
	        values ('age_group', 'Age group', 0, 0, 1);
      </query>
	  <query>
        insert into sahana_attribute_options
			(attribute_id, name, caption) values
			(last_insert_id(), 'unknown', 'Unknown'),
			(last_insert_id(), 'infant', 'Infant (age: less than 1)'),
			(last_insert_id(), 'child', 'Child (age: 1-12)'),
			(last_insert_id(), 'teenager', 'Teenager (age: 13-20)'),
			(last_insert_id(), 'adult', 'Adult (age: 21-60)'),
			(last_insert_id(), 'elderly', 'Elderly (age: over 60)');
	  </query>

      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('province', 'Province/state', 0, 0, 1);
      </query>

      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('orphan', 'Orphan?', 0, 0, 1);
      </query>

      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('district', 'District', 0, 0, 1);
      </query>

      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('city', 'City/village', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('address', 'Address', 1, 2, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('email', 'Email', 1, 2, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('nic_no', 'NIC no', 1, 2, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('passport_no', 'Passport no', 1, 2, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('marital_status', 'Marital status', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('country', 'Country', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('race', 'Race', 1, 2, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('religion', 'Religion', 1, 2, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('skin_colour', 'Skin colour', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('hair_colour', 'Hair colour', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('eye_colour', 'Eye colour', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('height', 'Height', 0, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('mobile_no', 'Mobile no', 1, 2, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('phone_no', 'Phone no', 1, 2, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('weight', 'Weight', 0, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('features', 'Distinctive Features', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('features', 'Distinctive Features', 1, 3, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('clothing', 'Clothes worn', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('comments', 'Comments', 1, 3, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('seen_time', 'Last seen time', 0, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('seen_at', 'Last seen at', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('status', 'Reported status of individual', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('next_of_kin', 'Next of kin', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('next_of_kin_contact', 'Next of kin contact details', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('picture', 'Picture', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('tracked_by', 'Tracked by', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('tracking_comments', 'Tracking comments', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporting_for', 'Reporting for', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporter_name', 'Reporter name', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporter_address', 'Reporter address', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporter_city', 'Reporter city', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporter_phone', 'Reporter phone', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporter_mobile', 'Reporter mobile', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporter_email', 'Reporter email', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporter_relationship', 'Reporter relationship', 1, 0, 1);
      </query>
      <query>
        insert into sahana_attributes (name, caption, data_type, publicity, search) values('reporter_org', 'Reporter organization', 1, 0, 1);
      </query>

      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='marital_status';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'single', 'Single' from sahana_attributes where name='marital_status';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'married', 'Married' from sahana_attributes where name='marital_status';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'divorced', 'Divorced' from sahana_attributes where name='marital_status';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'widowed', 'Widowed' from sahana_attributes where name='marital_status';
      </query>

      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='race';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'sinhalese', 'Sinhalese' from sahana_attributes where name='race';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'tamil', 'Tamil' from sahana_attributes where name='race';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'muslim', 'Muslim' from sahana_attributes where name='race';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'burghur', 'Burghur' from sahana_attributes where name='race';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'other', 'Other' from sahana_attributes where name='race';
      </query>

      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='religion';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'buddhism', 'Buddhism' from sahana_attributes where name='religion';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'hinduism', 'Hinduism' from sahana_attributes where name='religion';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'christian', 'Christian' from sahana_attributes where name='religion';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'islam', 'Islam' from sahana_attributes where name='religion';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'other', 'Other' from sahana_attributes where name='religion';
      </query>

      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='skin_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'dark_black', 'Dark or Black' from sahana_attributes where name='skin_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'brown', 'Brown' from sahana_attributes where name='skin_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'fair', 'Fair or light brown' from sahana_attributes where name='skin_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'white', 'White' from sahana_attributes where name='skin_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'other', 'Other' from sahana_attributes where name='skin_colour';
      </query>

      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'black', 'Black' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'dark_brown', 'Dark Brown' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'grey', 'Grey' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'grey_black ', 'Black going grey' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'tinted', 'Tinted' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'blonde', 'Blonde' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'brunette', 'Brunette' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'red', 'Red' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'bald', 'Bald' from sahana_attributes where name='hair_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'other', 'Other' from sahana_attributes where name='hair_colour';
      </query>

      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='eye_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'black', 'Black' from sahana_attributes where name='eye_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'dark_brown', 'Dark brown' from sahana_attributes where name='eye_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'light_brown', 'Light brown' from sahana_attributes where name='eye_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'blue', 'Blue' from sahana_attributes where name='eye_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'grey', 'Grey' from sahana_attributes where name='eye_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'green', 'Green' from sahana_attributes where name='eye_colour';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'other', 'other' from sahana_attributes where name='eye_colour';
      </query>

      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='status';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'alive', 'Alive and well' from sahana_attributes where name='status';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'missing', 'Missing' from sahana_attributes where name='status';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'injured', 'Injured' from sahana_attributes where name='status';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'deceased', 'Deceased' from sahana_attributes where name='status';
      </query>

      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'central', 'Central' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'eastern', 'Eastern' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'north_eastern', 'North Eastern' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'north_western', 'North Western' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'northern', 'Northern' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'sabaragamu', 'Sabaragamu' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'southern', 'Southern' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'uva', 'Uva' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'western', 'Western' from sahana_attributes where name='province';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'other', 'Other' from sahana_attributes where name='province';
      </query>


      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'unknown', 'Unknown' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'colombo', 'Colombo' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'gampaha', 'Gampaha' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'kalutara', 'Kalutara' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'kandy', 'Kandy' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'matale', 'Matale' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'nuwaraeliya', 'Nuwara Eliya' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'galle', 'Galle' from sahana_attributes where name='district';
      </query>
       <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'matara', 'Matara' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'hambantota', 'Hambantota' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'jaffna', 'Jaffna' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'mannar', 'Mannar' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'vavuniya', 'Vavuniya' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'mullaitivu', 'Mullaitivu' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'kilinochchi', 'Kilinochchi' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'batticaloa', 'Batticaloa' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'ampara', 'Ampara' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'trincomalee', 'Trincomalee' from sahana_attributes where name='district';
      </query>
       <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'kurunegala', 'Kurunegala' from sahana_attributes where name='district';
      </query>
       <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'puttalam', 'Puttalam' from sahana_attributes where name='district';
      </query>
       <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'anuradhapura', 'Anuradhapura' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'polonnaruwa', 'Polonnaruwa' from sahana_attributes where name='district';
      </query>
       <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'badulla', 'Badulla' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'monaragala', 'Monaragala' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'ratnapura', 'Ratnapura' from sahana_attributes where name='district';
      </query>
       <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'kegalle', 'Kegalle' from sahana_attributes where name='district';
      </query>
      <query>
        insert into sahana_attribute_options (attribute_id, name, caption) select id, 'other', 'Other' from sahana_attributes where name='district';
      </query>

    </queries>
  </install>
  <administration>
    <menu>Report Victim</menu>
  </administration>
</mosinstall>

